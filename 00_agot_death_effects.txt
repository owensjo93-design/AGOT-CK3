agot_make_unpruneable = {
	save_scope_as = new_unprunable
	title:c_ruins.holder = {
		trigger_event = {
			id = agot_events_generic.0002
			days = 1
		}
	}
}

agot_apply_inactive_traits_on_death = {
	agot_hair_dye_death_effect = yes

	agot_eye_gem_death_effect = yes

	agot_visible_disfigurement_death_effect = yes

	if = {
		limit = { vassal_contract_has_flag = has_palatinate_contract }
		make_trait_inactive = had_palatinate_contract
	}

	if = {
		limit = { has_character_flag = not_had_coronation }
		make_trait_inactive = not_had_coronation
	}

	if = {
		limit = {
			any_equipped_character_artifact = {
				artifact_slot_type = helmet
			}
		}
		if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_aegon_i_artifact }
			}
			make_trait_inactive = equipped_crown_aegon_i_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_aenys_artifact }
			}
			make_trait_inactive = equipped_crown_aenys_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_jaehaerys_artifact }
			}
			make_trait_inactive = equipped_crown_jaehaerys_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_aegon_iii_artifact }
			}
			make_trait_inactive = equipped_crown_aegon_iii_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_aegon_iv_artifact }
			}
			make_trait_inactive = equipped_crown_aegon_iv_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_baelor_artifact }
			}
			make_trait_inactive = equipped_crown_baelor_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_qolab_baelor_artifact }
			}
			make_trait_inactive = equipped_crown_of_qolab_baelor_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_maekar_artifact }
			}
			make_trait_inactive = equipped_crown_maekar_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = robertI_crown_artifact }
			}
			make_trait_inactive = equipped_robertI_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = joffreyI_crown_artifact }
			}
			make_trait_inactive = equipped_joffreyI_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = daenerys_crown_artifact }
			}
			make_trait_inactive = equipped_daenerys_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = renly_crown_artifact }
			}
			make_trait_inactive = equipped_renly_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = stannis_crown_artifact }
			}
			make_trait_inactive = equipped_stannis_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = beyondthewall_crown_artifact }
			}
			make_trait_inactive = equipped_beyondthewall_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_winter_artifact }
			}
			make_trait_inactive = equipped_crown_of_winter_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = bolton_crown_artifact }
			}
			make_trait_inactive = equipped_bolton_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = riverlands_crown_artifact }
			}
			make_trait_inactive = equipped_riverlands_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = iron_isles_crown_artifact }
			}
			make_trait_inactive = equipped_iron_isles_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = westerlander2_crown_artifact }
			}
			make_trait_inactive = equipped_westerlander2_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = westerlands_crown_artifact }
			}
			make_trait_inactive = equipped_westerlands_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = westerlands2_crown_artifact }
			}
			make_trait_inactive = equipped_westerlands2_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = stormlander_crown_artifact }
			}
			make_trait_inactive = equipped_stormlander_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = stormlands_crown_artifact }
			}
			make_trait_inactive = equipped_stormlands_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = valeman_crown_artifact }
			}
			make_trait_inactive = equipped_valeman_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = falcon_crown_artifact }
			}
			make_trait_inactive = equipped_falcon_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = reachman_crown_artifact }
			}
			make_trait_inactive = equipped_reachman_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = reach_crown_artifact }
			}
			make_trait_inactive = equipped_reach_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = tully_crown_artifact }
			}
			make_trait_inactive = equipped_tully_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = umber_crown_artifact }
			}
			make_trait_inactive = equipped_umber_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = dustin_crown_artifact }
			}
			make_trait_inactive = equipped_dustin_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = manderly_crown_artifact }
			}
			make_trait_inactive = equipped_manderly_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = royce_crown_artifact }
			}
			make_trait_inactive = equipped_royce_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = blackwood_crown_artifact }
			}
			make_trait_inactive = equipped_blackwood_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = frey_crown_artifact }
			}
			make_trait_inactive = equipped_frey_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = cargyll_crown_artifact }
			}
			make_trait_inactive = equipped_cargyll_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = redwyne_crown_artifact }
			}
			make_trait_inactive = equipped_redwyne_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = tarly_crown_artifact }
			}
			make_trait_inactive = equipped_tarly_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = hightower_crown_artifact }
			}
			make_trait_inactive = equipped_hightower_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = florent_crown_artifact }
			}
			make_trait_inactive = equipped_florent_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = greyjoy_crown_artifact }
			}
			make_trait_inactive = equipped_greyjoy_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = tarth_crown_artifact }
			}
			make_trait_inactive = equipped_tarth_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = swann_crown_artifact }
			}
			make_trait_inactive = equipped_swann_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = dornish_crown_artifact }
			}
			make_trait_inactive = equipped_dornish_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = dorne_crown_artifact }
			}
			make_trait_inactive = equipped_dorne_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = dayne_crown_artifact }
			}
			make_trait_inactive = equipped_dayne_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = reed_crown_artifact }
			}
			make_trait_inactive = equipped_reed_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = harlaw_crown_artifact }
			}
			make_trait_inactive = equipped_harlaw_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_rhaella_artifact }
			}
			make_trait_inactive = equipped_crown_rhaella_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_alysanne_artifact }
			}
			make_trait_inactive = equipped_crown_alysanne_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = circlet_visenya_artifact }
			}
			make_trait_inactive = equipped_circlet_visenya_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = circlet_rhaenys_artifact }
			}
			make_trait_inactive = equipped_circlet_rhaenys_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = daemon_stepstone_crown_artifact }
			}
			make_trait_inactive = equipped_daemon_stepstone_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = daemon_queen_stepstone_crown_artifact }
			}
			make_trait_inactive = equipped_daemon_queen_stepstone_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = driftwood_crown_1_artifact }
			}
			make_trait_inactive = equipped_driftwood_crown_1_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = valyrian_crown1_artifact }
			}
			make_trait_inactive = equipped_valyrian_crown1_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = valyrian_crown2_artifact }
			}
			make_trait_inactive = equipped_valyrian_crown2_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = westerosi_valyrian_crown1_artifact }
			}
			make_trait_inactive = equipped_westerosi_valyrian_crown1_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = westerosi_valyrian_crown2_artifact }
			}
			make_trait_inactive = equipped_westerosi_valyrian_crown2_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = iron_stag_crown_artifact }
			}
			make_trait_inactive = equipped_iron_stag_crown_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_the_wall_artifact }
			}
			make_trait_inactive = equipped_crown_of_the_wall_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_westerling_artifact }
			}
			make_trait_inactive = equipped_crown_of_westerling_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_the_tides_artifact }
			}
			make_trait_inactive = equipped_crown_of_the_tides_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_gardener_peace_artifact }
			}
			make_trait_inactive = equipped_crown_of_gardener_peace_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_qolab_gardener_artifact }
			}
			make_trait_inactive = equipped_crown_of_qolab_gardener_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_gardener_war_iron_artifact }
			}
			make_trait_inactive = equipped_crown_of_gardener_war_iron_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_mudd_artifact }
			}
			make_trait_inactive = equipped_crown_of_mudd_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_bear_island_artifact }
			}
			make_trait_inactive = equipped_crown_of_bear_island_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_hearts_home_artifact }
			}
			make_trait_inactive = equipped_crown_of_hearts_home_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_darklyn_artifact }
			}
			make_trait_inactive = equipped_crown_of_darklyn_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_dondarrion_artifact }
			}
			make_trait_inactive = equipped_crown_of_dondarrion_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_hellholt_artifact }
			}
			make_trait_inactive = equipped_crown_of_hellholt_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_castamere_artifact }
			}
			make_trait_inactive = equipped_crown_of_castamere_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_deep_den_artifact }
			}
			make_trait_inactive = equipped_crown_of_deep_den_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_the_banefort_artifact }
			}
			make_trait_inactive = equipped_crown_of_the_banefort_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_crakehall_artifact }
			}
			make_trait_inactive = equipped_crown_of_crakehall_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_the_grey_king_rusted_artifact }
			}
			make_trait_inactive = equipped_crown_of_the_grey_king_rusted_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_the_nights_king_artifact }
			}
			make_trait_inactive = equipped_crown_of_the_nights_king_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_true_winter_artifact }
			}
			make_trait_inactive = equipped_crown_of_true_winter_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_the_seven_artifact }
			}
			make_trait_inactive = equipped_crown_of_the_seven_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_the_old_gods_artifact }
			}
			make_trait_inactive = equipped_crown_of_the_old_gods_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_rhllor_artifact }
			}
			make_trait_inactive = equipped_crown_of_rhllor_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = circlet_of_rhllor_artifact }
			}
			make_trait_inactive = equipped_circlet_of_rhllor_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_hugor_artifact }
			}
			make_trait_inactive = equipped_crown_of_hugor_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_jeyne_westerling_artifact }
			}
			make_trait_inactive = equipped_crown_of_jeyne_westerling_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_winter_roses_artifact }
			}
			make_trait_inactive = equipped_crown_of_winter_roses_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_qolab_winter_roses_artifact }
			}
			make_trait_inactive = equipped_crown_of_qolab_winter_roses_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_qolab_generic_artifact }
			}
			make_trait_inactive = equipped_crown_of_qolab_generic_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_deep_winter_roses_artifact }
			}
			make_trait_inactive = equipped_crown_of_deep_winter_roses_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = qolab_crown_03_artifact }
			}
			make_trait_inactive = equipped_qolab_crown_03_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = qolab_crown_04_artifact }
			}
			make_trait_inactive = equipped_qolab_crown_04_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = qolab_crown_05_artifact }
			}
			make_trait_inactive = equipped_qolab_crown_05_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = qolab_crown_06_artifact }
			}
			make_trait_inactive = equipped_qolab_crown_06_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_daemonblackfyre_artifact }
			}
			make_trait_inactive = equipped_crown_daemonblackfyre_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_first_men_artifact }
			}
			make_trait_inactive = equipped_crown_of_first_men_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_the_andals_artifact }
			}
			make_trait_inactive = equipped_crown_of_the_andals_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_the_andals_silver_artifact }
			}
			make_trait_inactive = equipped_crown_of_the_andals_silver_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_mudd_coa_artifact }
			}
			make_trait_inactive = equipped_crown_of_mudd_coa_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_westerosi_diadem_artifact }
			}
			make_trait_inactive = equipped_crown_of_westerosi_diadem_artifact
		}
		else_if = {
			limit = {
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = crown_of_westerosi_diadem_silver_artifact }
			}
			make_trait_inactive = equipped_crown_of_westerosi_diadem_silver_artifact
		}
	}
}