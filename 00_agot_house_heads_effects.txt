agot_house_head_effect = {
	$CHARACTER$ ?= {
		if = {
			limit = {
				is_alive = yes
				NOT = { house.house_head = $CHARACTER$ }
			}
			house ?= {
				set_house_head = prev
			}
		}
	}
}

agot_lord_commander_house_head_setter = {
	if = {
		limit = { title:k_the_wall.holder.house.house_head = title:k_the_wall.holder }
		if = {
			limit = { title:k_the_wall.holder.house ?= { any_house_member = { count > 1 } } }
			title:k_the_wall.holder.house ?= {
				save_scope_as = current_house
				random_house_member = {
					limit = {
						is_landed = yes
						NOT = { this = title:k_the_wall.holder }
						any_held_title = { NOT = { this = title:k_the_wall } }
					}
					save_scope_as = new_head
					scope:current_house = { set_house_head = scope:new_head }
				}
			}
		}
	}
}

agot_house_head_setter = {
	if = {
		limit = {
			exists = house:house_Blackfyre.house_head
			game_start_date >= 8196.11.22
		}
		if = {
			limit = { character:Blackfyre_5 ?= { is_alive = yes } }
			agot_house_head_effect = { CHARACTER = character:Blackfyre_5 }
		}
		else_if = {
			limit = {
				character:Blackfyre_5 ?= { is_alive = no }
				character:Blackfyre_11 ?= { is_alive = yes }
			}
			agot_house_head_effect = { CHARACTER = character:Blackfyre_11 }
		}
		else_if = {
			limit = {
				character:Blackfyre_5 ?= { is_alive = no }
				character:Blackfyre_11 ?= { is_alive = no }
				character:Blackfyre_13 ?= { is_alive = yes }
			}
			agot_house_head_effect = { CHARACTER = character:Blackfyre_13 }
		}
	}
	if = {
		limit = {
			game_start_date >= 8283.9.1
			exists = dynasty:dynn_Targaryen.dynasty_founder.house.house_head
		}
		if = {
			limit = { character:Targaryen_8 = { is_alive = yes } }
			agot_house_head_effect = { CHARACTER = character:Targaryen_8 } # Viserys III
		}
		else = { agot_house_head_effect = { CHARACTER = character:Targaryen_9 } } # Danaerys
	}
}