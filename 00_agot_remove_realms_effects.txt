agot_remove_realms_scenario_effect = {
	if = { # 8106.2.10 The Rogue Prince
		limit = { game_start_date = 8106.4.18 }

		if = {
			limit = { agot_realm_three_daughters_enabled = no }

			character:Targaryen_61 = {
				# Lose titles
				create_title_and_vassal_change = {
					type = conquest
					save_scope_as = change
					add_claim_on_loss = no
				}
				every_held_title = {
					limit = { tier >= tier_county }
					change_title_holder = {
						holder = title:c_bloodstone.holder
						change = scope:change
						take_baronies = yes
					}
				}
				resolve_title_and_vassal_change = scope:change

				set_employer = title:e_the_iron_throne.holder
			}
		}
	}
	else_if = { # 8170.12.11 Titan Marches
		limit = { game_start_date = 8170.12.11 }

		if = {
			limit = {
				OR = {
					agot_realm_pentos_enabled = no
					agot_realm_braavos_enabled = no
				}
			}
			title:c_braavos.holder = {
				every_character_war = {
					limit = { always = yes }
					end_war = invalidated
				}
			}
		}
	}
	else_if = { # 8258.12.21 The Ninepenny Kings
		limit = { game_start_date = 8258.12.21 }

		if = {
			limit = { agot_realm_three_daughters_enabled = no }

			character:Blackfyre_14 = {
				destroy_title = title:e_blackfyre_rebellion
			}
		}
	}
}

agot_remove_realms_remove_special_buildings_effect = {
	#Andalos
	if = {
		limit = { has_building = agot_hugor_hill_01 }
		remove_building = agot_hugor_hill_01
	}
	if = {
		limit = { has_building = agot_godworf_01 }
		remove_building = agot_godworf_01
	}
	#Braavos
	if = {
		limit = { has_building = agot_sealords_palace_01 }
		remove_building = agot_sealords_palace_01
	}
	if = {
		limit = { has_building = agot_arsenal_01 }
		remove_building = agot_arsenal_01
	}
	if = {
		limit = { has_building = agot_iron_bank_01 }
		remove_building = agot_iron_bank_01
	}
	if = {
		limit = { has_building = agot_palace_of_truth_01 }
		remove_building = agot_palace_of_truth_01
	}
	if = {
		limit = { has_building = agot_isle_of_the_gods_01 }
		remove_building = agot_isle_of_the_gods_01
	}
	if = {
		limit = { has_building = agot_drowned_town_01 }
		remove_building = agot_drowned_town_01
	}
	if = {
		limit = { has_building = agot_titan_01 }
		remove_building = agot_titan_01
	}
	if = {
		limit = { has_building = agot_sweetwater_font_01 }
		remove_building = agot_sweetwater_font_01
	}
	if = {
		limit = { has_building = agot_nevios_retreat_01 }
		remove_building = agot_nevios_retreat_01
	}
	if = {
		limit = { has_building = agot_mothermont_01 }
		remove_building = agot_mothermont_01
	}
	#Disputed Lands
	if = {
		limit = { has_building = agot_triarchy_council_01 }
		remove_building = agot_triarchy_council_01
	}
	if = {
		limit = { has_building = agot_ruins_triarchy_council_01 }
		remove_building = agot_ruins_triarchy_council_01
	}
	if = {
		limit = { has_building = agot_tree_of_crowns_01 }
		remove_building = agot_tree_of_crowns_01
	}
	if = {
		limit = { has_building = agot_monument_of_borderland_01 }
		remove_building = agot_monument_of_borderland_01
	}
	#Lys
	if = {
		limit = { has_building = agot_temple_of_trade_01 }
		remove_building = agot_temple_of_trade_01
	}
	if = {
		limit = { has_building = agot_temple_of_yndros_01 }
		remove_building = agot_temple_of_yndros_01
	}
	if = {
		limit = { has_building = agot_perfumed_garden_01 }
		remove_building = agot_perfumed_garden_01
	}
	if = {
		limit = { has_building = agot_red_temple_lys_01 }
		remove_building = agot_red_temple_lys_01
	}
	if = {
		limit = { has_building = agot_prison_of_lys_01 }
		remove_building = agot_prison_of_lys_01
	}
	if = {
		limit = { has_building = agot_port_of_lys_01 }
		remove_building = agot_port_of_lys_01
	}
	#Myr
	if = {
		limit = { has_building = agot_great_wheel_01 }
		remove_building = agot_great_wheel_01
	}
	if = {
		limit = { has_building = agot_myr_cliffs_01 }
		remove_building = agot_myr_cliffs_01
	}
	if = {
		limit = { has_building = agot_myr_01 }
		remove_building = agot_myr_01
	}
	if = {
		limit = { has_building = agot_grand_temple_of_gelenei_01 }
		remove_building = agot_grand_temple_of_gelenei_01
	}
	if = {
		limit = { has_building = agot_statue_of_trios_01 }
		remove_building = agot_statue_of_trios_01
	}
	if = {
		limit = { has_building = agot_red_temple_myr_01 }
		remove_building = agot_red_temple_myr_01
	}
	#Pentos
	if = {
		limit = { has_building = agot_pentos_harbor_01 }
		remove_building = agot_pentos_harbor_01
	}
	if = {
		limit = { has_building = agot_magister_harbor_01 }
		remove_building = agot_magister_harbor_01
	}
	if = {
		limit = { has_building = agot_red_temple_pentos_01 }
		remove_building = agot_red_temple_pentos_01
	}
	if = {
		limit = { has_building = agot_pentos_01 }
		remove_building = agot_pentos_01
	}
	if = {
		limit = { has_building = agot_valdrizes_01 }
		remove_building = agot_valdrizes_01
	}
	if = {
		limit = { has_building = agot_nontelos_bazaar_01 }
		remove_building = agot_nontelos_bazaar_01
	}
	#Stepstones
	if = {
		limit = { has_building = agot_racallios_fort_01 }
		remove_building = agot_racallios_fort_01
	}
	if = {
		limit = { has_building = agot_crab_fields_01 }
		remove_building = agot_crab_fields_01
	}
	#Tyrosh
	if = {
		limit = { has_building = agot_tyrosh_01 }
		remove_building = agot_tyrosh_01
	}
	if = {
		limit = { has_building = agot_red_temple_tyrosh_01 }
		remove_building = agot_red_temple_tyrosh_01
	}
	if = {
		limit = { has_building = agot_bleeding_tower_01 }
		remove_building = agot_bleeding_tower_01
	}
	if = {
		limit = { has_building = agot_grand_temple_of_trios_01 }
		remove_building = agot_grand_temple_of_trios_01
	}
}

agot_remove_realm_effect = {
	$REALM$ = { save_scope_as = realm_to_remove }
	title:c_unknown.holder = { save_scope_as = unknown_ruler }

	scope:realm_to_remove = {
		#Destroy Noble Family Titles
		every_in_de_jure_hierarchy = {
			limit = {
				exists = holder
				tier >= tier_duchy
			}
			holder = {
				every_held_title = {
					limit = {
						is_noble_family_title = yes
					}
					holder = {
						if = {
							limit = { is_landed = no }
							every_courtier_or_guest = {
								death = {
									death_reason = death_vanished
								}
							}
						}
						destroy_title = prev
					}
				}
				every_vassal = {
					every_held_title = {
						limit = {
							is_noble_family_title = yes
						}
						holder = {
							if = {
								limit = { is_landed = no }
								every_courtier_or_guest = {
									death = {
										death_reason = death_vanished
									}
								}
							}
							destroy_title = prev
						}
					}
				}
			}
		}
		#Destroy Duchy+ Titles
		every_in_de_jure_hierarchy = {
			limit = {
				exists = holder
				tier >= tier_duchy
			}
			holder = { destroy_title = prev }
		}
		#Destroy County Titles and Remove Holders/Court
		every_in_de_jure_hierarchy = {
			limit = {
				tier = tier_county
			}
			set_county_faith = faith:fg_unknown
			set_county_culture = culture:unknown_culture
			every_county_province = {
				agot_remove_realms_remove_special_buildings_effect = yes
			}
			holder = {
				save_scope_as = old_holder
				if = {
					limit = {
						any_held_title = {
							tier = tier_county
							count = 1
						}
					}
				}
				every_courtier_or_guest = {
					death = {
						death_reason = death_vanished
					}
				}
			}
			create_title_and_vassal_change = {
				type = conquest
				save_scope_as = change
				add_claim_on_loss = yes
			}
			change_title_holder = {
				holder = scope:unknown_ruler
				change = scope:change
				take_baronies = yes
			}
			resolve_title_and_vassal_change = scope:change
			every_county_province = {
				limit = {
					has_holding = yes
					is_county_capital = no
				}
				remove_holding = yes
			}
			title_province = {
				set_holding_type = unknown_holding
			}
			scope:old_holder = {
				if = {
					limit = { is_ruler = no }
					death = {
						death_reason = death_vanished
					}
				}
			}
		}
		every_province = {
			limit = { county.holder = scope:unknown_ruler }
			save_scope_as = pool_province
			every_pool_character = {
				province = scope:pool_province
				death = {
					death_reason = death_vanished
				}
			}
		}
		#Destroy Landless Adventurers and Mercs
		every_ruler = {
			limit = {
				#do not use is_landless
				OR = {
					is_landless_adventurer = yes
					primary_title = {
						is_mercenary_company = yes
					}
				}
				capital_province.county.holder = scope:unknown_ruler
			}
			every_courtier_or_guest = {
				death = {
					death_reason = death_vanished
				}
			}
			destroy_title = primary_title
			death = {
				death_reason = death_vanished
			}
		}
	}
}