rv_rescue_potential_check = {
	OR = {
		any_heir = {
			is_imprisoned = yes
		}
		any_relation = {
			type = lover
			is_imprisoned = yes
		}
		any_relation = {
			type = friend
			is_imprisoned = yes
		}
		any_relation = {
			type = esr_family_friend
			is_imprisoned = yes
		}
		any_spouse = {
			is_imprisoned = yes
		}
		any_close_family_member = {
			OR = {
				is_imprisoned = yes
				any_consort = {
					reverse_has_opinion_modifier = {
						modifier = forced_me_concubine_marriage_opinion
						target = prev
					}
				}
			}
		}
		any_extended_family_member = {
			OR = {
				is_imprisoned = yes
				any_consort = {
					reverse_has_opinion_modifier = {
						modifier = forced_me_concubine_marriage_opinion
						target = prev
					}
				}
			}
		}
		any_former_spouse = {
			any_consort = {
				reverse_has_opinion_modifier = {
					modifier = forced_me_concubine_marriage_opinion
					target = prev
				}
			}
		}
		any_in_list = {
			variable = rv_declined_prisoner_list
			is_alive = yes
			is_imprisoned = yes
		}
	}
}

rv_war_declarer_needs_hook_on_liege = {
	scope:attacker = {
		trigger_if = {
			limit = {
				is_independent_ruler = no
				liege = scope:defender.liege
				NOT = { liege = scope:defender }
				liege = { has_realm_law_flag = vassal_internal_wars_banned }
				NOT = {
					vassal_contract_has_flag = vassal_contract_war_override
				}
			}
			always = yes
		}
		trigger_else_if = {
			limit = {
				is_independent_ruler = no
				NOT = { liege = scope:defender }
				liege = { has_realm_law_flag = vassal_all_wars_banned }
				NOT = {
					vassal_contract_has_flag = vassal_contract_war_override
				}
			}
			always = yes
		}
		trigger_else = {
			always = no
		}
	}
}