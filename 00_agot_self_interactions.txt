set_signature_weapon_interaction = {
	category = interaction_category_diplomacy
	desc = set_signature_weapon_interaction_desc
	use_diplomatic_range = no
	icon = icon_combat
	common_interaction = yes
	is_shown = {
		scope:recipient = scope:actor
		scope:actor ={ is_ai = no }
	}

	send_option = {
		is_valid = {
			scope:actor = {
				NOT = { has_character_flag = sword_person }
			}
		}
		flag = sword_person
		localization = set_signature_weapon_sword_person
	}
	send_option = {
		is_valid = {
			scope:actor = {
				NOT = { has_character_flag = swordshield_person }
			}
		}
		flag = swordshield_person
		localization = set_signature_weapon_swordshield_person
	}
	send_option = {
		is_valid = {
			scope:actor = {
				NOT = { has_character_flag = mace_person }
			}
		}
		flag = mace_person
		localization = set_signature_weapon_mace_person
	}
	send_option = {
		is_valid = {
			scope:actor = {
				NOT = { has_character_flag = maceshield_person }
			}
		}
		flag = maceshield_person
		localization = set_signature_weapon_maceshield_person
	}
	send_option = {
		is_valid = {
			scope:actor = {
				NOT = { has_character_flag = spear_person }
			}
		}
		flag = spear_person
		localization = set_signature_weapon_spear_person
	}
	send_option = {
		is_valid = {
			scope:actor = {
				NOT = { has_character_flag = spearshield_person }
			}
		}
		flag = spearshield_person
		localization = set_signature_weapon_spearshield_person
	}
	send_option = {
		is_valid = {
			scope:actor = {
				NOT = { has_character_flag = axe_person }
			}
		}
		flag = axe_person
		localization = set_signature_weapon_axe_person
	}
	send_option = {
		is_valid = {
			scope:actor = {
				NOT = { has_character_flag = hammer_person }
			}
		}
		flag = hammer_person
		localization = set_signature_weapon_hammer_person
	}

	on_accept = {
		scope:recipient = {
			remove_character_flag = swordshield_person
			remove_character_flag = maceshield_person
			remove_character_flag = spearshield_person
			remove_character_flag = sword_person
			remove_character_flag = axe_person
			remove_character_flag = spear_person
			remove_character_flag = mace_person
			remove_character_flag = hammer_person
			switch = {
				trigger = yes
				scope:swordshield_person = {
					hidden_effect = {
						add_character_flag = swordshield_person
						set_variable = {
							name = signature_weapon
							value = flag:sword
						}
					}
				}
				scope:maceshield_person = {
					hidden_effect = {
						add_character_flag = maceshield_person
						set_variable = {
							name = signature_weapon
							value = flag:mace
						}
					}
				}
				scope:spearshield_person = {
					hidden_effect = {
						add_character_flag = spearshield_person
						set_variable = {
							name = signature_weapon
							value = flag:spear
						}
					}
				}
				scope:sword_person = {
					hidden_effect = {
						add_character_flag = sword_person
						set_variable = {
							name = signature_weapon
							value = flag:sword
						}
					}
				}
				scope:axe_person = {
					hidden_effect = {
						add_character_flag = axe_person
						set_variable = {
							name = signature_weapon
							value = flag:axe
						}
					}
				}
				scope:spear_person = {
					hidden_effect = {
						add_character_flag = spear_person
						set_variable = {
							name = signature_weapon
							value = flag:spear
						}
					}
				}
				scope:mace_person = {
					hidden_effect = {
						add_character_flag = mace_person
						set_variable = {
							name = signature_weapon
							value = flag:mace
						}
					}
				}
				scope:hammer_person = {
					hidden_effect = {
						add_character_flag = hammer_person
						set_variable = {
							name = signature_weapon
							value = flag:hammer
						}
					}
				}
			}
		}
	}
	auto_accept = yes
}