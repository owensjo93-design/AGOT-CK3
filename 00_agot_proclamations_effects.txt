agot_proclamation_title_switch_effect = {
	if = {
		limit = {
			exists = scope:new_empire_title
			exists = scope:old_kingdom_title
		}
		scope:old_kingdom_title = { set_de_jure_liege_title = scope:new_empire_title }
		get_title = scope:new_empire_title
		clear_saved_scope = new_empire_title
		clear_saved_scope = old_kingdom_title
	}
}

agot_proclaim_kingdom_effect = {
	switch = {
		trigger = $SWITCH_TRIGGER$
		title:k_dorne = {
			title:e_dorne = { save_scope_as = new_empire_title }
			title:k_dorne = { save_scope_as = old_kingdom_title }
		}
		title:k_the_iron_islands = {
			title:e_the_iron_islands = { save_scope_as = new_empire_title }
			title:k_the_iron_islands = { save_scope_as = old_kingdom_title }
		}
		title:k_the_north = {
			title:e_the_north = { save_scope_as = new_empire_title }
			title:k_the_north = { save_scope_as = old_kingdom_title }
		}
		title:k_the_reach = {
			title:e_the_reach = { save_scope_as = new_empire_title }
			title:k_the_reach = { save_scope_as = old_kingdom_title }
		}
		title:k_the_riverlands = {
			title:e_the_riverlands = { save_scope_as = new_empire_title }
			title:k_the_riverlands = { save_scope_as = old_kingdom_title }
		}
		title:k_the_stormlands = {
			title:e_the_stormlands = { save_scope_as = new_empire_title }
			title:k_the_stormlands = { save_scope_as = old_kingdom_title }
		}
		title:k_the_vale = {
			title:e_the_vale = { save_scope_as = new_empire_title }
			title:k_the_vale = { save_scope_as = old_kingdom_title }
		}
		title:k_the_westerlands = {
			title:e_the_westerlands = { save_scope_as = new_empire_title }
			title:k_the_westerlands = { save_scope_as = old_kingdom_title }
		}
	}
	root = { agot_proclamation_title_switch_effect = yes }
}

agot_conquered_title_switch_effect = {
	if = {
		limit = {
			exists = scope:new_kingdom_title
			exists = scope:destroy_empire_title
		}
		get_title = scope:new_kingdom_title
		destroy_title = scope:destroy_empire_title
		scope:new_kingdom_title = { set_de_jure_liege_title = $NEW_LIEGE$ }
		clear_saved_scope = new_kingdom_title
		clear_saved_scope = destroy_empire_title
	}
}

agot_conquered_kingdom_effect = {
	switch = {
		trigger = $SWITCH_TRIGGER$
		title:e_dorne = {
			title:e_dorne = { save_scope_as = destroy_empire_title }
			title:k_dorne = { save_scope_as = new_kingdom_title }
		}
		title:e_the_iron_islands = {
			title:e_the_iron_islands = { save_scope_as = destroy_empire_title }
			title:k_the_iron_islands = { save_scope_as = new_kingdom_title }
		}
		title:e_the_north = {
			title:e_the_north = { save_scope_as = destroy_empire_title }
			title:k_the_north = { save_scope_as = new_kingdom_title }
		}
		title:e_the_reach = {
			title:e_the_reach = { save_scope_as = destroy_empire_title }
			title:k_the_reach = { save_scope_as = new_kingdom_title }
		}
		title:e_the_riverlands = {
			title:e_the_riverlands = { save_scope_as = destroy_empire_title }
			title:k_the_riverlands = { save_scope_as = new_kingdom_title }
		}
		title:e_the_stormlands = {
			title:e_the_stormlands = { save_scope_as = destroy_empire_title }
			title:k_the_stormlands = { save_scope_as = new_kingdom_title }
		}
		title:e_the_vale = {
			title:e_the_vale = { save_scope_as = destroy_empire_title }
			title:k_the_vale = { save_scope_as = new_kingdom_title }
		}
		title:e_the_westerlands = {
			title:e_the_westerlands = { save_scope_as = destroy_empire_title }
			title:k_the_westerlands = { save_scope_as = new_kingdom_title }
		}
	}
	agot_conquered_title_switch_effect = { NEW_LIEGE = $NEW_LIEGE_TITLE$ }
}

agot_set_de_jure_empire = {
	if = {
		limit = { $TITLE$.title_capital_county.title_province ?= { geographical_region = world_westeros_the_crownlands } }
		set_de_jure_liege_title = title:e_blackwater_bay
	}
	else_if = {
		limit = { $TITLE$.title_capital_county.title_province ?= { geographical_region = world_westeros_the_reach } }
		set_de_jure_liege_title = title:e_the_reach
	}
	else_if = {
		limit = { $TITLE$.title_capital_county.title_province ?= { geographical_region = world_westeros_the_stormlands } }
		set_de_jure_liege_title = title:e_the_stormlands
	}
	else_if = {
		limit = { $TITLE$.title_capital_county.title_province ?= { geographical_region = world_westeros_dorne } }
		set_de_jure_liege_title = title:e_dorne
	}
	else_if = {
		limit = { $TITLE$.title_capital_county.title_province ?= { geographical_region = world_westeros_the_westerlands } }
		set_de_jure_liege_title = title:e_the_westerlands
	}
	else_if = {
		limit = { $TITLE$.title_capital_county.title_province ?= { geographical_region = world_westeros_the_riverlands } }
		set_de_jure_liege_title = title:e_the_riverlands
	}
	else_if = {
		limit = { $TITLE$.title_capital_county.title_province ?= { geographical_region = world_westeros_the_vale } }
		set_de_jure_liege_title = title:e_the_vale
	}
	else_if = {
		limit = { $TITLE$.title_capital_county.title_province ?= { geographical_region = world_westeros_the_iron_islands } }
		set_de_jure_liege_title = title:e_the_iron_islands
	}
	else_if = {
		limit = { $TITLE$.title_capital_county.title_province ?= { geographical_region = world_westeros_the_north } }
		set_de_jure_liege_title = title:e_the_north
	}
}

